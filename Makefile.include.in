
ARCH ?= x86_64

ifeq ($(ARCH), arm)
  TOOLCHAIN := @arm_toolchain@
  CROSS_COMPILE := $(ARCH)-linux-
endif
ifeq ($(ARCH), mips)
  TOOLCHAIN := @mips_toolchain@
  CROSS_COMPILE := $(ARCH)-linux-
endif
ifeq ($(ARCH), mipsel)
  TOOLCHAIN := @mipsel_toolchain@
  CROSS_COMPILE := $(ARCH)-linux-
endif
ifeq ($(ARCH), x86_64)
  TOOLCHAIN :=
  CROSS_COMPILE :=
endif

PATH    := $(TOOLCHAIN):$(PATH)
CC       = $(CROSS_COMPILE)gcc
STRIP    = $(CROSS_COMPILE)strip
AR       = $(CROSS_COMPILE)ar
LD       = $(CROSS_COMPILE)ld

SRCDIR				= src.$(ARCH)
DESTDIR				= @install_dir@/$(ARCH)
PREFIX				= /usr
LIBDIR				= $(DESTDIR)$(PREFIX)/lib
INCLUDEDIR			= $(DESTDIR)$(PREFIX)/include
BUILDFLAGS			= -I$(INCLUDEDIR) -L$(LIBDIR)
TARBALLS_LOCATION	= @use_tarballs@
ARCHIVE_TOOL		= @TAR@
ARCHIVE_TOOL_FLAGS	= --strip-components=1 -xf
RETRIEVE_TOOL		= @CURL@
RETRIEVE_TOOL_FLAGS	= -Ls --create-dirs -f -O
GIT_TOOL			= @GIT@
GZIP_TOOL			= @GZIP@
CMAKE_TOOL			= @CMAKE@

ifeq ($(JOBS),)
  JOBS := $(shell grep -c ^processor /proc/cpuinfo 2>/dev/null)
  ifeq ($(JOBS),)
    JOBS := 1
  endif
endif

export ARCH TOOLCHAIN CROSS_COMPILE PATH \
	   CC STRIP AR LD SRCDIR DESTDIR PREFIX \
	   LIBDIR INCLUDEDIR BUILDFLAGS TARBALLS_LOCATION \
	   ARCHIVE_TOOL ARCHIVE_TOOL_FLAGS

